{"version":3,"sources":["programSelector.js"],"names":["FieloProgramSelectorPRP","element","this","element_","init","window","prototype","Constant_","PROGRAM","CssClasses_","PAGINATOR","onChange","filter","getProgramId_","forEach","call","programActions_","action","FieloButton","setParameter","programId_","field_","Visualforce","remoting","Manager","invokeAction","escape","e","console","log","fielo","util","spinner","FieloSpinner","hide","listOfPaginators_","paginator","FieloPaginator","setFilters","setPage","getRecords","callback","FieloFormElement","get","componentHandler","upgradeElement","fieloProgramSelectorPRP","bind","document","getElementsByClassName","querySelectorAll","register","constructor","classAsString","cssClass","widget"],"mappings":"CAAA,WACA,YAaA,IAAAA,GAAA,SAAAC,GACAC,KAAAC,SAAAF,EAGAC,KAAAE,OAEAC,QAAAL,wBAAAA,EAOAA,EAAAM,UAAAC,WACAC,QAAA,wBAUAR,EAAAM,UAAAG,aACAC,UAAA,qBAGAV,EAAAM,UAAAK,SAAA,WACA,GAAAC,KACAV,MAAAW,mBACAC,QAAAC,KAAAb,KAAAc,gBAAA,SAAAC,GACAA,EAAAC,YAAAC,aAAAjB,KAAAK,UAAAC,QAAAN,KAAAkB,aACAlB,MAEAU,EAAAV,KAAAmB,QAAAnB,KAAAkB,UAEA,KACAE,YAAAC,SAAAC,QAAAC,aACA,0DACAb,EAAAV,KAAAmB,QACA,cACAK,QAAA,IAEA,MAAAC,GAEAC,QAAAC,IAAAF,GACAG,MAAAC,KAAAC,QAAAC,aAAAC,UAIApB,QAAAC,KAAAb,KAAAiC,kBAAA,SAAAC,GAEAA,EAAAC,eAAAC,WAAA1B,GACAwB,EAAAC,eAAAE,UACAH,EAAAC,eAAAG,cACAtC,MAEAA,KAAAuC,YAMAzC,EAAAM,UAAAO,cAAA,WACAX,KAAAkB,WAAAlB,KAAAC,SAAAuC,iBAAAC,IAAA,UAMA3C,EAAAM,UAAAF,KAAA,WACAF,KAAAC,WACAyC,iBAAAC,eAAA3C,KAAAC,UACAE,OAAAyC,wBAAA5C,KAAAS,SAAAoC,KAAA7C,MACAA,KAAAmB,OAAA,2CACAnB,KAAAW,gBAEAX,KAAAuC,SAAA,aAGAvC,KAAAiC,kBACAa,SAAAC,uBAAA/C,KAAAO,YAAAC,WAGAR,KAAAc,gBAAAgC,SAAAE,iBACA,kCAAAhD,KAAAK,UAAAC,QAAA,QAKAoC,iBAAAO,UACAC,YAAApD,EACAqD,cAAA,0BACAC,SAAA,+BACAC,QAAA","file":"core.js","sourcesContent":["(function() {\n  'use strict';\n\n  /**\n   * @description Controlador para el formulario FieloProgramSelectorPRP.\n   * Permite el envío del formulario\n   * Implementa los patrones de diseño definidos por MDL en\n   * {@link https://github.com/jasonmayes/mdl-component-design-pattern}\n   *\n   * @version 1\n   * @author Hugo Gómez Mac Gregor <hugo.gomez@fielo.com>\n   * @param {HTMLElement} element - Elemento que será mejorado.\n   * @constructor\n   */\n  var FieloProgramSelectorPRP = function FieloProgramSelectorPRP(element) {\n    this.element_ = element;\n\n    // Initialize instance.\n    this.init();\n  };\n  window.FieloProgramSelectorPRP = FieloProgramSelectorPRP;\n\n  /**\n   * Guarda las constantes en un lugar para que sean facilmente actualizadas\n   * @enum {string | number}\n   * @private\n   */\n  FieloProgramSelectorPRP.prototype.Constant_ = {\n    PROGRAM: 'FieloPRP__Program__c'\n  };\n\n  /**\n   * Guarda strings para nombres de clases definidas por este componente que\n   * son usadas por JavaScript.\n   * Esto nos permite cambiarlos solo en un lugar\n   * @enum {string}\n   * @private\n   */\n  FieloProgramSelectorPRP.prototype.CssClasses_ = {\n    PAGINATOR: 'fielosf-paginator'\n  };\n\n  FieloProgramSelectorPRP.prototype.onChange = function() {\n    var filter = {};\n    this.getProgramId_();\n    [].forEach.call(this.programActions_, function(action) {\n      action.FieloButton.setParameter(this.Constant_.PROGRAM, this.programId_);\n    }, this);\n\n    filter[this.field_] = this.programId_;\n\n    try {\n      Visualforce.remoting.Manager.invokeAction(\n        'FieloPRP.BackEndProgramSelectorController.selectProgram',\n        filter[this.field_],\n        function() {},\n        {escape: false}\n      );\n    } catch (e) {\n      // Ya está todo listo. Oculto el spinner\n      console.log(e);\n      fielo.util.spinner.FieloSpinner.hide();\n    }\n\n    // disparo los paginadores\n    [].forEach.call(this.listOfPaginators_, function(paginator) {\n      // Seteo el paginador\n      paginator.FieloPaginator.setFilters(filter);\n      paginator.FieloPaginator.setPage();\n      paginator.FieloPaginator.getRecords();\n    }, this);\n\n    this.callback();\n  };\n\n  /**\n   * Guarda el programId\n   */\n  FieloProgramSelectorPRP.prototype.getProgramId_ = function() {\n    this.programId_ = this.element_.FieloFormElement.get('value');\n  };\n\n  /**\n   * Inicializa el elemento\n   */\n  FieloProgramSelectorPRP.prototype.init = function() {\n    if (this.element_) {\n      componentHandler.upgradeElement(this.element_);\n      window.fieloProgramSelectorPRP = this.onChange.bind(this);\n      this.field_ = 'FieloPRP__Member__r.FieloPLT__Program__c';\n      this.getProgramId_();\n      // para evitar el undefined\n      this.callback = function() {};\n\n      // Registro los paginadores de este filtro\n      this.listOfPaginators_ =\n        document.getElementsByClassName(this.CssClasses_.PAGINATOR);\n\n      // Registro los input hidden dependientes del program\n      this.programActions_ = document.querySelectorAll(\n        '.slds-button[data-parameters*=\"' + this.Constant_.PROGRAM + '\"]'\n      );\n    }\n  };\n\n  componentHandler.register({\n    constructor: FieloProgramSelectorPRP,\n    classAsString: 'FieloProgramSelectorPRP',\n    cssClass: 'fielosf-program-selector-prp',\n    widget: true\n  });\n})();\n"]}